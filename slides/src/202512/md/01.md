---
layout: section
---

# Introduction

---
level: 2
---

# Motivation

- What is in-situ visualization ?
    - Why do we need it?
    - What solutions are available to implement it?
        - See recent book:

<div grid="~ cols-2 gap-4" class="mt-4">

 <div class="col-span-1">
  <div class="w-20 ml-35">
        <img src="/img/01_book.png" />
  </div>

   [In Situ Visualization for Computational Science](https://link.springer.com/book/10.1007/978-3-030-81627-8)
 </div>

 <div class="col-span-1">

   \"Oak Ridge National Laboratory saw three generations of leading
   supercomputers-Jaguar (2009) to Titan (2012) to Summit (2018)-
   <span style="color: #ff0000;"> yield a 100X increase in computer power </span>
   (from 1.75 petaFLOPS to more than 175 petaFLOPS), but 
   <span style="color: #ff0000;">only a 10X increase in filesystem performance </span>
   (from 240 GB/s to 2.5TB/s)\" (from the book)

   <!-- #comment: in -->

 </div>
</div>

---
level: 2
---

# Post-hoc visualization

- For decades, the dominant paradigm has been _post-hoc_ visualization
- Simulation codes iterate, and save data at regular time intervals
    - Visualization and domain scientists can then read the data back from storage and,
    - interactively explore the data without time constraints

<br>
```
									"Without I/O, no visualization is possible"
```
<br>


<Admonition >
The true cost of doing I/O is an aggregate of the solver’s I/O phase and the
many iterations of visualization sessions
</Admonition>

---
level: 2
---

# Post-hoc visualization

<div grid="~ cols-2 gap-4" class="mt-4">

 <div class="col-span-1">
Even if scientists could afford to keep most of the data for analysis, they
must transfer the data to a machine with sufficient capacity and processing
power:<br>

<v-click> - Very high data transfer</v-click>
<br>
<v-click> - Visualization machine needs to be almost as powerful as the supercomputer</v-click>
<br>

<v-click> - The alternative: use smaller temporal and spatial subsets</v-click>
<br>
 </div>

 <div class="col-span-1">
  <div class="w-90">
        <img src="/img/01_posthoc.png" border="1px"/>
  </div>

  Figure taken from 'In Situ Visualization at Extreme Scale: Challenges and Opportunities', Kwan-Liu Ma, IEEE CG&A, nov/dec 2009
 </div>

</div>

---
level: 2
---

# Post-hoc visualization

<br>
  <div class="w-180">
        <img src="/img/01_posthoc_io.png" class="ml-20 border=1px"/>
  </div>

---
level: 2
---

# In situ visualization

<div grid="~ cols-2 gap-4" class="mt-4">

 <div class="col-span-1">
Instrument the code such that both the simulation and visualization
calculations run on the same hardware<br>

Co-processing at runtime can render images directly or extract features --
_which are much smaller than the original raw data_

 </div>

 <div class="col-span-1">
  <div class="w-90">
        <img src="/img/01_insitu.png" border="1px"/>
  </div>

  Figure taken from 'In Situ Visualization at Extreme Scale: Challenges and Opportunities', Kwan-Liu Ma, IEEE CG&A, nov/dec 2009
 </div>

</div>

---
level: 2
---

# In situ visualization

  <div class="w-180">
        <img src="/img/01_posthoc_inline.png" class="ml-20 border=1px"/>
  </div>

---
level: 2
---

# In-situ visualization has raised quite a few questions

- Sharing physical resources and domain decomposition?
- What % of time can we afford to "do visualization" vs. "advance the solver"?
- Which feature extraction and visualization tasks are best suited for on-the-fly processing?
- Since less data would be effectively stored to disk, should we augment it with ancillary data?
- Can we provide a generic abstraction to describe the data and mesh structures?

---
level: 2
---

## A third paradigm has also emerged: in-transit visualization

<br>
  <div class="w-160">
        <img src="/img/01_intransit.png" class="ml-20 border=1px"/>
  </div>

 Figure taken from 'In Situ Visualization for Computational Science', Hank Childs et al., IEEE CG&A, nov/dec 2019

---
level: 2
---

# Many definitions and colloquial use for "in-situ"

**Overall motivation**:
process data in the processor’s memory space, without touching the disks, even if data is moved to a distinct set of resources (in-transit)

- Co-processing, concurrent processing, run-time visualization, "in-situ", "in place", etc..

- ["A Terminology for In Situ Visualization and Analysis Systems"](https://cdux.cs.uoregon.edu/pubs/ChildsIJHPCA.pdf),<br>
Hank Childs et al, International Journal of High Performance Computing Applications, 34(6):676–691

- For the scope of this paper, "in situ processing" was defined to be:<br>
<br>
```
									"Processing data as it is generated"
```
<br>

---
level: 2
---

## In situ systems are described via multiple, distinct axes
<br>

<v-click> - Integration type<br>
&nbsp;&nbsp;&nbsp;&nbsp;How visualization and analysis code is integrated with the simulation code?</v-click><br>
<v-click> - Proximity<br>
&nbsp;&nbsp;&nbsp;&nbsp;How close is the visualization code from the data</v-click><br>
<v-click> - Access<br>
&nbsp;&nbsp;&nbsp;&nbsp;How does the simulation give access to the data</v-click><br>
<v-click> - Division of execution<br>
&nbsp;&nbsp;&nbsp;&nbsp;How compute resources are shared between simulation and in situ routines</v-click><br>
<v-click> - Operation controls<br>
&nbsp;&nbsp;&nbsp;&nbsp;The mechanism for selecting which operations are executed during run-time</v-click><br>
<v-click> - Output type<br>
&nbsp;&nbsp;&nbsp;&nbsp;Which types of operations are performed on the simulation data before it is output</v-click> <br>

---
level: 2
---

## In situ systems are described via multiple, distinct axes
<br>

  <div class="w-170">
        <img src="/img/01_axes.png" class="ml-2 border=2px"/>
  </div>

												Fig taken from the paper

---
level: 2
---

## What about my [or the solver] internal data model?
<br>

Do the standard visualization apps support all the data structures I use in my code?

- Use Data Adaptors (e.g. NEK5000 spectral code => converted to hexahedra
  in a VTK plugin)

- File formats in traditional post-hoc visualization most-often preserve,
  document, the nature of the grid.<br> See for example the family of VTK
  XML-based file formats (*.pvti, *.pvtu, *.pvtp, …)

- Some others don’t.

- Some I/O libraries require ad-hoc conventions for proper data discovery
(e.g. HDF5 Gadget)

